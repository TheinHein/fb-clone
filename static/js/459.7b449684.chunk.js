"use strict";(self.webpackChunkmy_fb_clone=self.webpackChunkmy_fb_clone||[]).push([[459],{2459:function(e,n,r){r.r(n),r.d(n,{default:function(){return ve}});var t=r(1413),i=r(5861),s=r(9439),a=r(7757),o=r.n(a),c=r(3767),l=r(7924),u=r(890),d=r(493),x=r(5021),h=r(6278),p=r(9333),f=r(6259),j=r(2094),Z=r(7237),g=r(9298),m=r(1249),b=r(1897),v=r(9931),w=r(184),y=[{id:"Current City",name:"Current City",icon:(0,w.jsx)(g.Z,{})},{id:"Workplace",name:"Workplace",icon:(0,w.jsx)(m.Z,{})},{id:"School",name:"School",icon:(0,w.jsx)(b.Z,{})},{id:"Hometown",name:"Hometown",icon:(0,w.jsx)(v.Z,{})},{id:"Relationship Status",name:"Relationship Status",icon:(0,w.jsx)(Z.Z,{})},{id:"See Your About Info",name:"See Your About Info",icon:(0,w.jsx)(j.Z,{})}],R=r(6151),S=function(){return(0,w.jsx)(R.Z,{fullWidth:!0,variant:"contained",color:"inherit",children:"Edit Public Details"})};var C=function(){return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.Z,{dense:!0,disablePadding:!0,children:y.map((function(e){var n=e.name,r=e.icon,t=e.id;return(0,w.jsx)(x.ZP,{disablePadding:!0,children:(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(p.Z,{children:r}),(0,w.jsx)(f.Z,{primary:n})]})},t)}))}),(0,w.jsx)(S,{})]})},P=r(4701),k=r(2791),I=r(1224),F=r(292),U=r(220),L=r(7047),D=r(5456);var E=function(e){var n=e.onChange,r=e.id,t=e.photo,i=e.onSave;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("label",{htmlFor:r,children:[(0,w.jsx)(F.Z,{onChange:n,accept:"image/*",id:r,type:"file",style:{display:"none"}}),(0,w.jsx)(R.Z,{"aria-label":"upload picture",startIcon:(0,w.jsx)(D.Z,{}),endIcon:"Choose a photo",variant:"blue",component:"span"})]}),t.file&&(0,w.jsxs)(c.Z,{spacing:3,alignItems:"center",children:[(0,w.jsx)(u.Z,{variant:"h3",children:"Preview profile picture"}),t.fileURI?(0,w.jsx)(U.Z,{sx:{width:"300px",height:"300px",borderRadius:"50%"},src:t.fileURI,alt:t.file.name}):(0,w.jsx)(L.Z,{animation:"pulse",variant:"circular",width:300,height:300}),(0,w.jsx)(R.Z,{onClick:i,children:"Save"})]})]})},A=r(8712),N=r(9062),M=r(8446),H=r(3239),W=r(9286);var z=function(e){var n=e.toggleDrawer,r=e.id,a=(0,I.Eu)(),l=(0,I.H1)(),d=(0,k.useState)({file:null,fileURI:null}),x=(0,s.Z)(d,2),h=x[0],p=x[1],f=(0,k.useState)(!1),j=(0,s.Z)(f,2),Z=j[0],g=j[1],m=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,b();case 3:g(!1),n(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.Z)(o().mark((function e(){var n,r,t,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.file){e.next=13;break}return n="".concat(a.user.id,"/photos/").concat(h.file.name),e.next=4,W.Z.uploadFile({filePath:n,file:h.file});case 4:return r=e.sent,t=r.fileSnapShot,i=r.publicFileURL,e.next=9,(0,N.r7)((0,N.JU)(A.db,"users","".concat(a.user.id)),{photoURL:i,storagePhotoURI:t.metadata.fullPath});case 9:return l.handleUpdate({photoURL:i}),s={userId:a.user.id,file:h.file,type:"Friends",activity:"profile picture"},e.next=13,W.Z.createPost(s);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(E,{onChange:function(e){var n=e.target.files[0];p((function(e){return(0,t.Z)((0,t.Z)({},e),{},{file:n})})),function(e){if(e.target.files&&e.target.files[0]){var n=new FileReader;n.onload=function(e){p((function(n){return(0,t.Z)((0,t.Z)({},n),{},{fileURI:e.target.result})}))},n.readAsDataURL(e.target.files[0])}}(e)},onSave:m,id:r,photo:h}),(0,w.jsx)(M.Z,{open:Z,children:(0,w.jsxs)(c.Z,{bgcolor:"white",position:"absolute",top:"50%",left:"50%",p:3,alignItems:"center",borderRadius:2,spacing:2,sx:{transform:"translate(-50%,-50%)",width:"280px"},children:[(0,w.jsx)(u.Z,{id:"modal-modal-description",variant:"h6",component:"h3",children:"Setting profile picture"}),(0,w.jsx)(H.Z,{sx:{padding:"5px"}})]})})]})},_=r(2678),B=r(5712),T=r(4489),V=function(e){var n=e.toggleDrawer;return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(_.Z,{header:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(B.Z,{onClick:n}),(0,w.jsx)(T.Z,{title:"Select Profile Picture"})]}),body:(0,w.jsx)(z,{toggleDrawer:n,id:"profile-pic-picker"})})})},Y=r(6088);var G=function(){var e=(0,I.Eu)();return(0,w.jsxs)(c.Z,{alignItems:"center",children:[(0,w.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",width:"100%",children:[(0,w.jsx)(u.Z,{variant:"h3",children:"Profile Picture"}),(0,w.jsx)(P.Z,{anchor:"bottom",button:function(e){return(0,w.jsx)(R.Z,{size:"small",onClick:function(){return e(!0)},children:"Add"})},drawer:function(e){return(0,w.jsx)(V,{toggleDrawer:function(){return e(!1)}})}})]}),(0,w.jsx)(Y.Z,{displayName:e.user.displayName,photoURL:e.user.photoURL,width:150,height:150})]})},J=r(4285),K=r(8870);var O=function(){return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",width:"100%",children:[(0,w.jsx)(u.Z,{variant:"h3",children:"Cover Photo"}),(0,w.jsx)(P.Z,{anchor:"bottom",button:function(e){return(0,w.jsx)(R.Z,{size:"small",onClick:function(){return e(!0)},children:"Add"})},drawer:function(e){return(0,w.jsx)(V,{toggleDrawer:function(){return e(!1)}})}})]}),(0,w.jsx)(K.Z,{sx:{width:"100%",height:"250px",bgcolor:"rgb(190, 190, 190)",borderRadius:"10px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,w.jsx)(J.Z,{sx:{color:"white",fontSize:"20px"}})})]})},q=function(e){var n=e.toggleDrawer;return(0,w.jsx)(_.Z,{header:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(B.Z,{onClick:n}),(0,w.jsx)(T.Z,{title:"Edit Profile"})]}),body:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(G,{}),(0,w.jsx)(O,{}),(0,w.jsx)(u.Z,{children:"Bio"}),(0,w.jsx)(u.Z,{children:"Describe yourself..."}),(0,w.jsx)(u.Z,{children:"Details"})]})})},Q=r(6213),X=r(9276),$=r(2868),ee=function(){var e=(0,I.Eu)();return(0,w.jsxs)(c.Z,{spacing:1,children:[(0,w.jsx)(X.Z,{sx:{bgcolor:"rgba(0,0,0,0.5)",height:200,marginBottom:"100px",position:"relative",borderRadius:"15px 15px 0 0"},children:(0,w.jsx)(Q.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(0,w.jsx)($.Z,{alt:"Remy Sharp",sx:{width:30,height:30,border:"2px solid white",borderRadius:"100%",bgcolor:"rgba(190,190,190)",color:"white",padding:"5px"}}),sx:{position:"absolute",top:"calc(100% - 100px)",left:"calc(50% - 100px)"},children:(0,w.jsx)(U.Z,{alt:e.user.displayName,src:e.user.photoURL,sx:{width:200,height:200,border:"2px solid white",bgcolor:"rgb(190,190,190)"}})})}),(0,w.jsx)(u.Z,{variant:"h2",align:"center",children:e.user.displayName})]})},ne=r(1286),re=function(e){var n=e.onClick;return(0,w.jsx)(R.Z,{fullWidth:!0,startIcon:(0,w.jsx)(ne.Z,{}),endIcon:"Edit Profile",onClick:n,variant:"contained",color:"inherit"})},te=r(8439),ie=function(){return(0,w.jsx)(R.Z,{fullWidth:!0,startIcon:(0,w.jsx)(te.Z,{}),endIcon:"Add to Story",variant:"contained"})},se=function(){return(0,w.jsx)(R.Z,{variant:"contained",color:"inherit",children:(0,w.jsx)(j.Z,{})})};var ae=function(){var e=(0,I.Eu)();return(0,w.jsxs)(c.Z,{spacing:2,children:[(0,w.jsx)(ee,{displayName:e.user.displayName,avatarSrc:e.user.photoURL}),(0,w.jsxs)(c.Z,{direction:"row",spacing:1,children:[(0,w.jsx)(ie,{}),(0,w.jsx)(P.Z,{anchor:"right",button:function(e){return(0,w.jsx)(re,{onClick:e})},drawer:function(e){return(0,w.jsx)(q,{toggleDrawer:e})}}),(0,w.jsx)(se,{})]})]})};var oe=function(){return(0,w.jsx)(u.Z,{variant:"h3",children:"Friends"})},ce=r(6871),le=r(3031),ue=r(3101),de=r(1982),xe=r(5271),he=r(5228),pe=r(3896),fe=r(5504),je=r(6603),Ze=r(1176),ge=[{id:"tab-1",name:"Photos",icon:(0,w.jsx)(D.Z,{})},{id:"tab-2",name:"Avatars",icon:(0,w.jsx)(fe.Z,{})},{id:"tab-3",name:"Music",icon:(0,w.jsx)(je.Z,{})},{id:"tab-4",name:"Did You Know",icon:(0,w.jsx)(Ze.Z,{})}],me=function(){var e=(0,k.useState)(0),n=(0,s.Z)(e,2),r=n[0],t=n[1];return(0,w.jsx)(he.Z,{variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable buttons",value:r,onChange:function(e,n){t(n)},sx:{bgcolor:"white",padding:"10px",display:"flex",alignItems:"center","& .Mui-selected":{border:"none",color:"#00000099"},"& .MuiTabs-indicator":{display:"none"}},children:ge.map((function(e){var n=e.id,r=e.name,t=e.icon;return(0,w.jsx)(pe.Z,{disableRipple:!0,disableTouchRipple:!0,icon:t,iconPosition:"start",label:r,sx:{margin:"0 5px",textTransform:"capitalize",bgcolor:"#f1f3f4",borderRadius:"9999px",padding:"0 15px",minHeight:"fit-content",height:"30px"}},n)}))})},be=r(4771);var ve=function(){var e=(0,I.Eu)(),n=(0,xe.Z)(e.user.id),r=(0,k.useState)([]),a=(0,s.Z)(r,2),d=a[0],x=a[1],h=(0,k.useState)([]),p=(0,s.Z)(h,2),f=p[0],j=p[1],Z=(0,k.useState)(!1),g=(0,s.Z)(Z,2),m=g[0],b=g[1],v=(0,k.useState)(0),y=(0,s.Z)(v,2),R=y[0],S=y[1],P=(0,k.useState)(!0),F=(0,s.Z)(P,2),U=F[0],L=F[1],D=(0,ce.s0)();(0,k.useEffect)((function(){(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),x([]),e.next=4,W.Z.getAllFriends(n,x);case 4:b(!1);case 5:case"end":return e.stop()}}),e)})))()}),[n]),(0,k.useEffect)((function(){(0,i.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return b(!0),j([]),n.next=4,W.Z.getInitUserPosts({userId:e.user.id,setPosts:j,setLastVisible:S,setHasMore:L});case 4:b(!1);case 5:case"end":return n.stop()}}),n)})))()}),[e.user.id]);var E=function(e){D("/users/".concat(e)),x([])},A=function(){var n=(0,i.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,W.Z.getMoreUserPosts({userId:e.user.id,setPosts:j,lastVisible:R,setLastVisible:S,setHasMore:L});case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,w.jsxs)(c.Z,{spacing:1,divider:(0,w.jsx)(l.Z,{}),bgcolor:"#F0F2F5",p:1,children:[(0,w.jsx)(ae,{}),(0,w.jsx)(C,{}),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(oe,{}),(0,w.jsx)(c.Z,{direction:"row",rowGap:2,columnGap:2,flexWrap:"wrap",children:d.map((function(e){return(0,w.jsx)(ue.Z,{friend:e,handleClickShowProfile:E},e.id)}))})]}),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Z,{variant:"h3",children:"Posts"}),(0,w.jsx)(be.Z,{dataLength:f.length,next:A,hasMore:U,loader:(0,w.jsx)(c.Z,{py:1,children:(0,w.jsx)(le.Z,{loading:!0,post:{}})}),children:(0,w.jsx)(c.Z,{spacing:1,children:f.map((function(e){return(0,w.jsx)(le.Z,{post:(0,t.Z)((0,t.Z)({},e),{},{displayName:n.displayName,photoURL:n.photoURL}),loading:m},e.id)}))})}),(0,w.jsx)(me,{}),(0,w.jsx)(de.Z,{})]})]})}}}]);
//# sourceMappingURL=459.7b449684.chunk.js.map